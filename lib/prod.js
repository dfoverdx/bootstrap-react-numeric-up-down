"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var _JSXStyle=_interopDefault(require("styled-jsx/style")),React=require("react"),React__default=_interopDefault(React),reactFontawesome=require("@fortawesome/react-fontawesome"),freeSolidSvgIcons=require("@fortawesome/free-solid-svg-icons");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret;function emptyFunction(){}var factoryWithThrowingShims=function(){function e(e,t,n,r,i,a){if(a!==ReactPropTypesSecret_1){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=emptyFunction,n.PropTypes=n,n},propTypes=createCommonjsModule(function(e){e.exports=factoryWithThrowingShims()}),classnames=createCommonjsModule(function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)&&i.length){var s=n.apply(null,i);s&&e.push(s)}else if("object"===a)for(var o in i)t.call(i,o)&&i[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}),IconDefElTypes=[Number,Number,function(e){return Array.isArray(e)&&e.every(function(e){return e&&e.constructor===String})},String,String];function mightBeFAIcon(e){if(!e)return!1;if(e.constructor===String)return/^[a-z0-9][a-z0-9\-]*$/i.test(e);if(Array.isArray(e))return e.every(function(e){return e.constructor===String});if(!(e instanceof Object&&e.iconName))return!1;switch(e.prefix){case"fas":case"far":case"fab":break;default:return!1}var t=e.icon;return!(!Array.isArray(t)||5!==t.length)&&t.every(function(e,t){return 2===t?IconDefElTypes[2](e):e&&e.constructor===IconDefElTypes[t]})}var iconDefinitionPropType=propTypes.oneOfType([propTypes.string,propTypes.arrayOf(propTypes.string),propTypes.element,propTypes.shape({prefix:propTypes.oneOf(["fas","fab","far","fal"]).isRequired,iconName:propTypes.string.isRequired,icon:propTypes.array})]);function sandwich(e,t,n){return Math.max(t,Math.min(n,e))}function getUVals(e){var t=void 0===e.min?-1/0:e.min,n=void 0===e.max?1/0:e.max;return{uMin:t,uMax:n,uValue:void 0===e.value?sandwich(0,t,n):e.value}}var NumericUpDown=function(e){function t(e){var n;_classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).input=React__default.createRef(),n.recursiveUpdates=0;getUVals(e);return n.state={targetValue:null,unsetValue:void 0===e.value?"":null},(e.value<e.min||e.value>e.max)&&(n.state.targetValue=e.value),n._incrementValue=n._incrementValue.bind(_assertThisInitialized(_assertThisInitialized(n))),n._decrementValue=n._decrementValue.bind(_assertThisInitialized(_assertThisInitialized(n))),n._setUnsetValue=n._setUnsetValue.bind(_assertThisInitialized(_assertThisInitialized(n))),n}return _inherits(t,React.PureComponent),_createClass(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.min,r=t.max,i=t.value,a=e.min,s=e.max,o=e.value,u=this.state.targetValue;if(null!==u)if(i!==o&&0===this.recursiveUpdates)this.setState({targetValue:null});else if(n!==a&&n<=u&&a>u||r!==s&&r>=u&&s<u)return this._updateValue(u),void this.setState({targetValue:null});if(o==i&&(s!==r||a!==n)){null===u&&(n>o||r<o)&&this.setState({targetValue:o});var l=getUVals(this.props),p=l.uMin,c=l.uMax;a!==n&&n>=u?this._updateValue(Math.min(n,c)):s!==r&&r<=u?this._updateValue(Math.max(r,p)):a>s&&(n<=i||r>=i)&&(i<=n?this._updateValue(n):this._updateValue(r))}}},{key:"_updateValue",value:function(e){e!==this.props.value&&(this.props.onChange?(this.recursiveUpdates++,this.props.onChange(e),this.recursiveUpdates--):void 0===this.props.value&&this.setState({unsetValue:e}))}},{key:"_incrementValue",value:function(e,t){if(!this.props.disabled){this.setState({targetValue:null});var n=this.props.step;if(void 0===this.props.value){var r=getUVals(this.props),i=r.uValue,a=r.uMin,s=r.uMax;if(this.input.current&&""===this.input.current.value)this._updateValue(sandwich(i+n,a,s));else{if(!this.input.current)throw new Error("Somehow this.input.current was not set.");var o=this.state.unsetValue;o=""===o?i:o,this._updateValue(Math.min(o+n,s))}}else this._updateValue(Math.min(this.props.max,this.props.value+this.props.step));e&&e(t)}}},{key:"_decrementValue",value:function(e,t){if(!this.props.disabled){this.setState({targetValue:null});var n=this.props.step;if(void 0===this.props.value){var r=getUVals(this.props),i=r.uValue,a=r.uMin,s=r.uMax;if(this.input.current&&""===this.input.current.value)this._updateValue(sandwich(i-n,a,s));else{if(!this.input.current)throw new Error("Somehow this.input.current was not set.");var o=this.state.unsetValue;o=""===o?i:o,this._updateValue(Math.max(o-n,a))}}else this._updateValue(Math.max(this.props.min,this.props.value-n));e&&e(t)}}},{key:"_setUnsetValue",value:function(e){this._updateValue(e.target.value)}},{key:"render",value:function(){var e=this.props,t=(e.iconColor,e.minusIcon),n=e.plusIcon,r=(e.inputAlign,e.inputColor),i=e.className,a=e.allowManualInputWithNaNBounds,s=e.value,o=e.min,u=e.max,l=e.disabled,p=(e.onChange,_objectWithoutProperties(e,["iconColor","minusIcon","plusIcon","inputAlign","inputColor","className","allowManualInputWithNaNBounds","value","min","max","disabled","onChange"])),c={value:s,min:o,max:u,disabled:l},f=getIconStyles(),d=f.className,h=f.styles,y=["d-flex","flex-nowrap","flex-row","align-items-center","numeric-up-down",l&&"disabled",i];return!a&&o>=u&&(c.disabled=l=!0),t=this._createIconBtn(!0,t,d),n=this._createIconBtn(!1,n,d),void 0===s&&(c.value=void 0===s?this.state.unsetValue:s,c.onChange=this._setUnsetValue),React__default.createElement("div",_extends({},p,{className:_JSXStyle.dynamic([["2780546048",[this.props.inputAlign]]])+" "+(null!=p.className&&p.className||classnames(y)||"")}),t,React__default.createElement("input",_extends({type:"number"},c,{ref:this.input,className:_JSXStyle.dynamic([["2780546048",[this.props.inputAlign]]])+" "+(null!=c.className&&c.className||classnames("form-control mx-2",r&&"text-".concat(r))||"")})),n,h,React__default.createElement(_JSXStyle,{styleId:"2780546048",css:["input.__jsx-style-dynamic-selector{text-align:".concat(this.props.inputAlign,";-webkit-flex:1;-ms-flex:1;flex:1;-moz-appearance:textfield;}"),"input.__jsx-style-dynamic-selector::-webkit-outer-spin-button,input.__jsx-style-dynamic-selector::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],dynamic:[this.props.inputAlign]}))}},{key:"_createIconBtn",value:function(e,t,n){var r=this.props,i=r.value,a=r.min,s=r.max,o=r.disabled,u=r.iconColor,l=[e?"minus-icon":"plus-icon",n,(o||(e?i<=a:i>=s))&&"disabled"],p=e?this._decrementValue:this._incrementValue;if(u instanceof Object&&(u="text-".concat(u[e?"minus":"plus"])),React__default.isValidElement(t)){var c={className:classnames.apply(void 0,[t.props.className,u].concat(_toConsumableArray(l))),onClick:p};return t.props.onClick&&(c.onClick=p.bind(this,t.props.onClick)),React__default.cloneElement(t,c)}if(mightBeFAIcon(t))try{return React__default.createElement(reactFontawesome.FontAwesomeIcon,{icon:t,onClick:p.bind(this,null),className:classnames.apply(void 0,[u].concat(_toConsumableArray(l)))})}catch(e){}return t.constructor===String?(l=l.concat(["btn",u?u.replace("text-","btn-outline-"):"btn-outline-secomdary"]),React__default.createElement("div",{onClick:p.bind(this,null),className:classNames(l)},t)):t}}]),t}();function getIconStyles(){return{styles:React__default.createElement(_JSXStyle,{styleId:"1158657347",css:[".minus-icon.jsx-1158657347,.plus-icon.jsx-1158657347{cursor:pointer;}",".minus-icon.disabled.jsx-1158657347,.plus-icon.disabled.jsx-1158657347,.disabled.jsx-1158657347 .minus-icon.jsx-1158657347,.disabled.jsx-1158657347 .plus-icon.jsx-1158657347{opacity:.65;cursor:default;}"]}),className:"jsx-1158657347"}}_defineProperty(NumericUpDown,"propTypes",{inputColor:propTypes.oneOfType([propTypes.string,propTypes.shape({minus:propTypes.string.isRequired,plus:propTypes.string.isRequired})]),iconColor:propTypes.string,value:propTypes.number,min:propTypes.number,max:propTypes.number,step:propTypes.number,minusIcon:iconDefinitionPropType.isRequired,plusIcon:iconDefinitionPropType.isRequired,disabled:propTypes.bool,onChange:propTypes.func,inputAlign:propTypes.oneOf(["left","center","right"]),allowManualInputWithNaNBounds:propTypes.bool}),_defineProperty(NumericUpDown,"defaultProps",{minusIcon:freeSolidSvgIcons.faMinusCircle,plusIcon:freeSolidSvgIcons.faPlusCircle,inputAlign:"center",allowManualInputWithNaNBounds:!1,step:1}),module.exports=NumericUpDown;
